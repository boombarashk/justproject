{"version":3,"sources":["store.js","components/About.js","components/Validator.js","components/InputBox.js","components/AuthReg.js","components/Auth.js","components/Chapters.js","components/Chapter.js","components/Profile.js","components/Root.js","index.js"],"names":["LOGIN","DATA_LOAD","store","createStore","combineReducers","user","userState","action","type","payload","data","dataState","About","this","props","fetch","then","response","json","result","setContent","className","src","alt","React","Component","connect","state","dispatch","WrappedComponent","HelpIcon","faIcon","icon","faEnvelope","faLock","HelpError","valid","message","withValidation","htmlFor","id","title","name","defaultValue","value","required","data-valid","onChange","ev","target","handlerChangeInput","bind","errMessages","rules","validationRules","key","details","checkResult","validate","length","msg","push","setState","stateValidForm","changeValidForm","currentForm","validForm","checkFields","forEach","elementName","field","dataset","handlerChange","rule","minlength","equal","regexp","trim","etValue","exp","RegExp","test","fields","email","pwd","repeatpwd","equalfield","MODE_FORM_AUTH","MODE_FORM_REG","checkUnoUser","password","CryptoJS","MD5","toString","ConnectedForm","login","useState","needSubmitErrorView","changeNeedSubmitErrorView","currentRef","useRef","entriesFields","Array","from","Object","entries","mode","pop","inputBoxes","map","item","current","filter","args","ref","onClick","preventDefault","form","restProps","history","PREFIX","handlerSubmit","withRouter","Auth","stateShowRegForm","setStateShowRegForm","AuthReg","links","page","to","useParams","content","dangerouslySetInnerHTML","__html","ConnectedPrivateRoute","component","rest","render","Root","exact","activeClassName","path","Chapters","children","Profile","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.34fd91d0.chunk.js","sourcesContent":["import { createStore, combineReducers } from 'redux'\r\n\r\nexport const LOGIN = 'LOGIN'\r\nconst userReducer = (userState = null, action) => {\r\n    return action.type === LOGIN ? action.payload : userState\r\n}\r\n\r\nexport const DATA_LOAD = 'DATA_LOAD'\r\nconst dataReducer = (dataState = {}, action) => {\r\n    return action.type === DATA_LOAD ? action.payload : dataState\r\n}\r\n\r\n\r\nexport const store = createStore(combineReducers({user: userReducer, data: dataReducer}), {})\r\n","import React from \"react\";\nimport {DATA_LOAD} from \"../store\";\nimport {connect} from \"react-redux\";\n\nclass About extends React.Component {\n  componentDidMount() {\n    if (!this.props.data) {\n      fetch('./moomin.json').then((response) => response.json())\n          .then(result => {\n            this.props.setContent(result.data)\n          })\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"block\">\n          <div className=\"title\">Tove Marika Jansson</div>\n          <div className=\"block\">Tove was a Swedish-speaking Finnish author, novelist, painter, illustrator and comic strip author. Brought up by artistic parents, Jansson studied art from 1930 to 1938 in Stockholm, Helsinki and Paris. Her first solo art exhibition was in 1943. At the same time, she was writing short stories and articles for publication, as well as creating the graphics for book covers and other purposes. She continued to work as an artist and a writer for the rest of her life.</div>\n          <div className=\"block\">Jansson wrote the Moomin books for children, starting in 1945 with The Moomins and the Great Flood. The next two books, Comet in Moominland and Finn Family Moomintroll, published in 1946 and 1948 respectively, were highly successful in sales, adding to sales of the first book. For her work as a children's writer she received the Hans Christian Andersen Medal in 1966.</div>\n            <div className=\"text-center\"><img src=\"/tove.png\" alt=\"\"/></div>\n\n        </div>\n    );\n  }\n}\n\nconst setContent = (data) => ({ type: DATA_LOAD, payload: data })\nconst mapDispatchToProps = dispatch => {\n  return {\n    setContent: data => dispatch(setContent({data: data}))\n  }\n}\n\nexport default connect(state => ({ ...state.data}), mapDispatchToProps)(About)\n","import React from \"react\";\r\n\r\nexport default function withValidation(WrappedComponent) {\r\n\r\n    return class extends React.Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.handlerChangeInput = this.handlerChangeInput.bind(this);\r\n            this.state = {\r\n                valid: props.valid,\r\n                errMessages: []\r\n            };\r\n        }\r\n\r\n        handlerChangeInput(target) {\r\n            const {value} = target\r\n            const rules = this.props.validationRules\r\n            let valid = true\r\n            const errMessages = []\r\n            if (rules) {\r\n                for (let key in rules) {\r\n                    const details = rules[key]\r\n                    const checkResult = this.validate(value, key, details)\r\n                    if (typeof checkResult === 'boolean') {\r\n                        valid = valid && checkResult && errMessages.length === 0\r\n                    } else {\r\n                        valid = false\r\n                        let msg = checkResult\r\n                        if (this.props.errMessages && key in this.props.errMessages) {\r\n                            msg = this.props.errMessages[key]\r\n                        }\r\n                        errMessages.push(msg)\r\n                    }\r\n                }\r\n            }\r\n\r\n//            target.dataset.valid = valid\r\n            this.setState({\r\n                valid,\r\n                errMessages\r\n            });\r\n\r\n            if (!valid && this.props.stateValidForm) {\r\n                this.props.changeValidForm(false)\r\n            } else {\r\n                if (this.props.currentForm) {\r\n                    let validForm = true\r\n                    this.props.checkFields.forEach(elementName => {\r\n                        const field = this.props.currentForm[elementName]\r\n                        validForm = validForm && field && field.dataset.valid\r\n                    })\r\n                    this.props.changeValidForm(validForm)\r\n                }\r\n            }\r\n\r\n            if (this.props.handlerChange) {\r\n                this.props.handlerChange()\r\n            }\r\n        }\r\n\r\n        validate(value, rule, details) {\r\n            switch (rule) {\r\n                case 'required':\r\n                    if (details) {\r\n                        return this.required(value) || 'Обязательное поле'\r\n                    }\r\n                    ;\r\n                    break;\r\n                case 'minlength':\r\n                    return this.minlength(value, details) || `Должно быть не менее ${details} символов`;\r\n                    break;\r\n                case 'equalfield':\r\n                    if (this.props.currentForm) {\r\n                        const field = this.props.currentForm[details]\r\n                        if (field && 'value' in field) {\r\n                            return this.equal(value, field.value) || 'Ошибка'\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'regexp':\r\n                    return this.regexp(value, details) || 'Ошибка'; break\r\n            }\r\n            return true\r\n        }\r\n\r\n        render() {\r\n            return <WrappedComponent  {...this.props}\r\n                                      onChange={ this.handlerChangeInput }\r\n                                      valid={ this.state.valid }\r\n                                      message={ this.state.errMessages.length ? this.state.errMessages[0] : null }\r\n            />;\r\n        }\r\n\r\n        required(value) {\r\n            return value.trim().length > 0\r\n        }\r\n\r\n        minlength(value, details) {\r\n            return value.length >= details\r\n        }\r\n\r\n        equal(value, etValue) {\r\n            return value === etValue\r\n        }\r\n\r\n        regexp(value, details) {\r\n            const setRegexp = {\r\n                'email': /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/\r\n            }\r\n            const exp = setRegexp[details] || new RegExp(details)\r\n            // пустое значение считаем валидным\r\n            return value.length === 0 || exp.test(value)\r\n        }\r\n    };\r\n}\r\n","import React from \"react\";\r\nimport withValidation from \"./Validator\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faLock, faEnvelope } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst HelpIcon = (props) => {\r\n    let faIcon = null\r\n\r\n    switch (props.icon) {\r\n        case 'email': faIcon = faEnvelope; break\r\n        case 'password': faIcon = faLock; break\r\n    }\r\n    return faIcon && <span className=\"icon is-left\">\r\n        <FontAwesomeIcon icon={faIcon} />\r\n    </span>\r\n}\r\n\r\nconst HelpError = (props) => {\r\n    return !props.valid && <p className=\"help is-danger\">\r\n        {props.message}\r\n    </p>\r\n}\r\n\r\nconst InputBox = (props) => {\r\n\r\n\r\n    return <div className=\"field\">\r\n            <label className=\"label\" htmlFor={props.id}>{props.title}</label>\r\n            <div className=\"control has-icons-left\">\r\n                <input type={props.type}\r\n                   id={props.id}\r\n                   name={props.name}\r\n                   className={`input ${props.valid ? '' : 'is-danger'}`}\r\n                   defaultValue={props.value}\r\n                   required={props.required}\r\n                   data-valid={props.valid}\r\n                   onChange={ ev => props.onChange(ev.target)}/>\r\n\r\n                <HelpIcon icon={props.icon || props.type }/>\r\n            </div>\r\n\r\n        <HelpError message={props.message} valid={props.valid}/>\r\n\r\n    </div>\r\n}\r\n\r\nexport default withValidation(InputBox);\r\n","import React, {useState, useRef} from \"react\";\r\nimport CryptoJS from 'crypto-js'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport InputBox from \"./InputBox\";\r\nimport {LOGIN} from \"../store\";\r\nimport {PREFIX} from \"./Root\";\r\n\r\nconst fields = {\r\n    email: {\r\n        type: \"email\",\r\n        title: \"Email\",\r\n        validationRules: { required: false, regexp: 'email'},\r\n        errMessages: {regexp: \"Ошибка: Неверный E-Mail\"},\r\n        valid: true,\r\n    },\r\n    pwd:  {\r\n        type: \"password\",\r\n        title: \"Password\",\r\n        minlength: 6,\r\n        validationRules: { required: false, minlength: 6,},\r\n        errMessages: {minlength: \"Ошибка: В пароле должно быть не менее 6 символов\"},\r\n        valid: true,\r\n    },\r\n    repeatpwd:  {\r\n        type: \"password\",\r\n        title: \"Password\",\r\n        minlength: 6,\r\n        validationRules: { required: false, minlength: 6, equalfield: 'pwd'},\r\n        errMessages: {\r\n            minlength: \"Ошибка: В пароле должно быть не менее 6 символов\",\r\n            equalfield: \"Пароли должны совпадать\"\r\n        },\r\n        valid: true,\r\n    },\r\n}\r\n\r\nexport const MODE_FORM_AUTH = 'auth'\r\nexport const MODE_FORM_REG = 'reg'\r\nconst handlerSubmit = (ev, form, changeNeedSubmitErrorView, restProps) => {\r\n    const {mode} = restProps || MODE_FORM_REG\r\n    ev.preventDefault()\r\n    if (mode === MODE_FORM_AUTH) {\r\n        if (checkUnoUser({\r\n            user: form.email.value,\r\n            password: form.pwd.value\r\n        })) {\r\n            restProps.login({email: form.email.value})\r\n            restProps.history.push(PREFIX + '/profile')\r\n        } else {\r\n            changeNeedSubmitErrorView(true)\r\n        }\r\n    }\r\n}\r\n\r\nconst checkUnoUser = ({user, password}) => {\r\n    return CryptoJS.MD5(user).toString() === '9591e7a4fc90a027f7b7594b38a29a41' &&\r\n        CryptoJS.MD5(password).toString() === 'd9d1b168eac8f197e0576b56cfc23ece'\r\n}\r\n\r\nfunction AuthRegForm(props) {\r\n    const [stateValidForm, changeValidForm] = useState(true)\r\n    const [needSubmitErrorView, changeNeedSubmitErrorView] = useState(false)\r\n    const currentRef = useRef()\r\n\r\n    const entriesFields = Array.from(Object.entries(fields))\r\n    if (props.mode === MODE_FORM_AUTH) { /*if name =='repeatpwd'*/ entriesFields.pop() }\r\n\r\n    const inputBoxes = entriesFields.map( ([name,item]) => {\r\n        return <InputBox { ...item }\r\n                         key={ `fieldBox-${name}` }\r\n                         name={ name }\r\n                         currentForm={ currentRef.current }\r\n                         checkFields={ entriesFields.filter( ([name, item]) => 'validationRules' in item).map( args => args[0]) }\r\n                         stateValidForm ={ stateValidForm }\r\n                         changeValidForm={ changeValidForm }\r\n                         handlerChange = {() => { changeNeedSubmitErrorView(false) }} />\r\n    })\r\n\r\n    return <form ref={currentRef}>\r\n        <div className=\"subtitle\">Форма {props.mode === MODE_FORM_AUTH ? 'авторизации' : 'регистрации'}</div>\r\n\r\n        { inputBoxes }\r\n\r\n        <div className=\"block text-right\">\r\n            <button className=\"button is-link\" onClick={ (ev) => {\r\n                ev.preventDefault()\r\n                if (stateValidForm) {\r\n                    handlerSubmit(ev, currentRef.current, changeNeedSubmitErrorView, {...props})\r\n                }\r\n\r\n                if (props.handlerSubmit) {\r\n                    props.handlerSubmit()\r\n                }\r\n            }}>{props.mode === MODE_FORM_REG ? 'Ok' : 'Войти'}</button>\r\n        </div>\r\n\r\n        <div className={`help is-danger ${needSubmitErrorView && props.mode === MODE_FORM_AUTH ? '': 'is-hidden'}`}>\r\n            Имя пользователя или пароль введены не верно\r\n        </div>\r\n    </form>\r\n}\r\n\r\nconst login = (user) => ({ type: LOGIN, payload: user })\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        login: user => dispatch(login({user}))\r\n    }\r\n}\r\n\r\nconst ConnectedForm = connect(null, mapDispatchToProps)(AuthRegForm)\r\n\r\nexport default withRouter(ConnectedForm)\r\n","import React, {useState} from \"react\";\r\nimport AuthRegForm from './AuthReg.js'\r\nimport {MODE_FORM_AUTH, MODE_FORM_REG} from \"./AuthReg\";\r\n\r\nexport default function Auth () {\r\n    const [stateShowRegForm, setStateShowRegForm] = useState(false)\r\n    return <>\r\n        <AuthRegForm mode={MODE_FORM_AUTH}/>\r\n\r\n        <a onClick={ ()=>{setStateShowRegForm(true)} }>Регистрация</a>\r\n\r\n        <div className={`modal ${stateShowRegForm ? 'is-active' : ''}`}>\r\n            <div className=\"modal-background\"></div>\r\n            <div className=\"modal-content\">\r\n                <div className=\"box\">\r\n                    <AuthRegForm mode={MODE_FORM_REG}\r\n                        handlerSubmit={()=>{setStateShowRegForm(false)}}/>\r\n                </div>\r\n            </div>\r\n            <button className=\"modal-close is-large\"onClick={() => {setStateShowRegForm(false)}}></button>\r\n        </div>\r\n    </>\r\n}\r\n\r\n","import {connect} from 'react-redux';\r\nimport {Link} from \"react-router-dom\";\r\nimport {PREFIX} from \"./Root\";\r\n\r\nconst Chapters = function(props) {\r\n    const links = (props.data && props.data.length)\r\n        ? props.data.filter(item => item.page).map(item => <li key={item.id}>\r\n            <Link to={`${PREFIX}/news/${item.page}`} >{item.title}</Link>\r\n            &nbsp;(страница {item.page})\r\n        </li>)\r\n        : 'Not Found'\r\n\r\n    return <div>\r\n        <ul>\r\n        { links }\r\n        </ul>\r\n    </div>\r\n}\r\n\r\nexport default connect(state => ({...state.data}))(Chapters)\r\n","import React from \"react\";\r\nimport {connect} from 'react-redux';\r\nimport { useParams } from 'react-router-dom'\r\n\r\nfunction Chapter(props) {\r\n    let { id } = useParams();\r\n    const data = props.data && props.data[+id]\r\n        ? props.data[+id -1].content\r\n        : 'Not Found'\r\n\r\n    return <div>\r\n        <div className=\"subtitle\">{id}.</div>\r\n        <div className=\"contentChapter\" dangerouslySetInnerHTML={{__html:  data }}/>\r\n    </div>\r\n}\r\n\r\nexport default connect(state => ({...state.data}))(Chapter)\r\n","import {connect} from 'react-redux'\r\n\r\nconst Profile = (props) => {\r\n    return <>\r\n        <div className=\"title\">Profile</div>\r\n        <p><b>Email:</b> {props.user && props.user.email}</p>\r\n    </>\r\n}\r\n\r\nexport default connect(state => ({...state.user}))(Profile)\r\n","import React from 'react'\r\nimport { connect, Provider } from 'react-redux'\r\nimport { NavLink, BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom'\r\nimport About from './About.js'\r\nimport Auth from './Auth.js'\r\nimport Chapters from \"./Chapters\";\r\nimport Chapter from \"./Chapter\";\r\nimport Profile from \"./Profile\";\r\n\r\nexport const PREFIX = '/justproject'\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    const { user } = rest\r\n    return <Route {...rest} render={(props) => (\r\n        user\r\n            ? <Component {...props} />\r\n            : <Redirect to={`${PREFIX}/login`} />\r\n    )}/>\r\n}\r\n\r\nconst ConnectedPrivateRoute = connect(state => ({\r\n    user: state && state.user\r\n}))(PrivateRoute)\r\n\r\nconst Root = ({ store }) => {\r\n    return <Provider store={store}>\r\n        <Router>\r\n            <nav className=\"tabs\">\r\n                <NavLink exact={true} activeClassName=\"is-invisible\" to={`${PREFIX}/`}><span>На главную</span></NavLink>\r\n                <NavLink activeClassName=\"is-active\" to={`${PREFIX}/news`}><span>Новости</span></NavLink>\r\n                <NavLink activeClassName=\"is-active\" to={`${PREFIX}/profile`}><span>Профиль</span></NavLink>\r\n            </nav>\r\n\r\n            <Switch>\r\n                <Route exact path={`${PREFIX}/`} component={About}/>\r\n                <Route exact path={`${PREFIX}/news`} component={Chapters}/>\r\n                <Route path={`${PREFIX}/news/:id`} children={<Chapter/>}/>\r\n                <Route path={`${PREFIX}/login`} component={Auth}/>\r\n                <ConnectedPrivateRoute path={`${PREFIX}/profile`} component={Profile} />\r\n            </Switch>\r\n        </Router>\r\n    </Provider>\r\n}\r\n\r\nexport default Root\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {store} from './store'\nimport Root from './components/Root'\nimport './index.css';\nimport 'bulma/css/bulma.css'\n\nReactDOM.render(\n  <React.StrictMode>\n      <Root store={store} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}